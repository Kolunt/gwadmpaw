{% extends "base.html" %}

{% block title %}Звания пользователя - Админ-панель{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>Управление званиями пользователя</h1>
        <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">← Назад</a>
    </div>
    
    <div class="user-info-card">
        <h2>{{ user.username }} (ID: {{ user.user_id }})</h2>
        <p><strong>Текущие звания:</strong> 
            {% if user_titles %}
                {% for title in user_titles %}
                    <span class="title-badge" style="background-color: {{ title.color }}20; color: {{ title.color }}; border-color: {{ title.color }};">
                        {% if title.icon %}{{ title.icon }} {% endif %}{{ title.display_name }}
                    </span>
                {% endfor %}
            {% else %}
                <span class="text-muted">Нет званий</span>
            {% endif %}
        </p>
    </div>
    
    <div class="roles-management">
        <h3>Назначить звание</h3>
        <form method="POST" class="role-form">
            <input type="hidden" name="action" value="assign">
            <select name="title_id" required>
                <option value="">Выберите звание</option>
                {% for title in all_titles %}
                    {% if title.id not in user_title_ids %}
                    <option value="{{ title.id }}">
                        {% if title.icon %}{{ title.icon }} {% endif %}{{ title.display_name }}
                    </option>
                    {% endif %}
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-primary">Назначить</button>
        </form>
        
        <h3>Удалить звание</h3>
        <form method="POST" class="role-form">
            <input type="hidden" name="action" value="remove">
            <select name="title_id" required>
                <option value="">Выберите звание</option>
                {% for title in user_titles %}
                <option value="{{ title.id }}">
                    {% if title.icon %}{{ title.icon }} {% endif %}{{ title.display_name }}
                </option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-danger">Удалить</button>
        </form>
    </div>
</div>
{% endblock %}

