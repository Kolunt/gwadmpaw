{% extends "base.html" %}

{% block title %}–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è - –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –î–µ–¥—ã –ú–æ—Ä–æ–∑—ã{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>üåê –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è</h1>
        <p class="admin-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–∞–π—Ç–∞</p>
    </div>

    {% if not BABEL_AVAILABLE %}
    <div class="alert alert-warning">
        <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:</strong> Flask-Babel –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –î–ª—è —Ä–∞–±–æ—Ç—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: <code>pip install -r requirements.txt</code>
    </div>
    {% endif %}

    <div class="settings-form">
        <form method="POST" action="{{ url_for('admin_localization') }}">
            <div class="setting-card">
                <div class="setting-card-header">
                    <label for="default_language" class="setting-label">
                        –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    </label>
                    <span class="setting-badge">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </div>
                <div class="setting-card-body">
                    <small class="setting-hint">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</small>
                    <select 
                        id="default_language" 
                        name="default_language" 
                        class="setting-input"
                    >
                        {% for lang_code, lang_name in available_languages.items() %}
                        <option value="{{ lang_code }}" {% if default_language == lang_code %}selected{% endif %}>
                            {{ lang_name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="setting-card">
                <div class="setting-card-header">
                    <label class="setting-label">–¢–µ–∫—É—â–∞—è –ª–æ–∫–∞–ª—å</label>
                    <span class="setting-badge">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                </div>
                <div class="setting-card-body">
                    <p><strong>–ê–∫—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫:</strong> 
                        <span class="badge">{{ available_languages.get(current_locale, current_locale) }}</span>
                        <code>({{ current_locale }})</code>
                    </p>
                    <small class="setting-hint">
                        –¢–µ–∫—É—â–∏–π —è–∑—ã–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:<br>
                        1. –Ø–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)<br>
                        2. –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã—à–µ)<br>
                        3. –†—É—Å—Å–∫–∏–π (—Å–∏—Å—Ç–µ–º–Ω—ã–π)
                    </small>
                </div>
            </div>

            <div class="setting-card">
                <div class="setting-card-header">
                    <label class="setting-label">–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏</label>
                    <span class="setting-badge">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                </div>
                <div class="setting-card-body">
                    <ul class="language-list">
                        {% for lang_code, lang_name in available_languages.items() %}
                        <li>
                            <strong>{{ lang_name }}</strong>
                            <code>{{ lang_code }}</code>
                            {% if lang_code == current_locale %}
                            <span class="badge badge-active">–ê–∫—Ç–∏–≤–µ–Ω</span>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                    <small class="setting-hint">
                        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ <code>app.py</code> –∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤.
                    </small>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <a href="{{ url_for('admin_panel') }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>
</div>

<style>
.language-list {
    list-style: none;
    padding: 0;
    margin: 1rem 0;
}

.language-list li {
    padding: 0.75rem;
    margin-bottom: 0.5rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.language-list li strong {
    min-width: 120px;
}

.language-list li code {
    background: var(--bg-primary);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.875rem;
}

.badge-active {
    background-color: #28a745;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.875rem;
    margin-left: auto;
}

.alert {
    padding: 1rem;
    margin-bottom: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid;
}

.alert-warning {
    background-color: #fff3cd;
    border-color: #ffc107;
    color: #856404;
}

.alert code {
    background-color: rgba(0, 0, 0, 0.1);
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
}
</style>
{% endblock %}

