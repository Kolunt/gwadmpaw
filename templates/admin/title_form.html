{% extends "base.html" %}

{% block title %}{% if title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–∞–Ω–∏—è{% else %}–°–æ–∑–¥–∞–Ω–∏–µ –∑–≤–∞–Ω–∏—è{% endif %} - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>{% if title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–∞–Ω–∏—è{% else %}–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–≤–∞–Ω–∏—è{% endif %}</h1>
        <a href="{{ url_for('admin_titles') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
    </div>
    
    <div class="form-container">
        <form method="POST" class="role-form">
            {% if not title %}
            <div class="form-group">
                <label for="name">–ò–º—è –∑–≤–∞–Ω–∏—è (–ª–∞—Ç–∏–Ω–∏—Ü–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤):</label>
                <input type="text" id="name" name="name" required 
                       pattern="[a-z0-9_]+" 
                       placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: contributor"
                       value="{{ title.name if title else '' }}">
                <small>–¢–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ</small>
            </div>
            {% else %}
            <div class="form-group">
                <label>–ò–º—è –∑–≤–∞–Ω–∏—è:</label>
                <input type="text" value="{{ title.name }}" disabled>
                <small>–ò–º—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∑–≤–∞–Ω–∏—è –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å</small>
            </div>
            {% endif %}
            
            <div class="form-group">
                <label for="display_name">–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è:</label>
                <input type="text" id="display_name" name="display_name" required 
                       value="{{ title.display_name if title else '' }}"
                       placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –ê–≤—Ç–æ—Ä –∏–¥–µ–∏">
            </div>
            
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="description" name="description" rows="3" 
                          placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–≤–∞–Ω–∏—è –∏ –µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è">{{ title.description if title else '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="icon">–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏ –∏–ª–∏ —Å–∏–º–≤–æ–ª):</label>
                <input type="text" id="icon" name="icon" 
                       value="{{ title.icon if title else '' }}"
                       placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: üí°"
                       maxlength="2">
                <small>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏ –∏–ª–∏ —Å–∏–º–≤–æ–ª—ã (–º–∞–∫—Å–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞)</small>
            </div>
            
            <div class="form-group">
                <label for="color">–¶–≤–µ—Ç:</label>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <input type="color" id="color" name="color" 
                           value="{{ title.color if title else '#007bff' }}"
                           style="width: 80px; height: 40px;">
                    <input type="text" 
                           value="{{ title.color if title else '#007bff' }}"
                           placeholder="#007bff"
                           pattern="#[0-9A-Fa-f]{6}"
                           onchange="document.getElementById('color').value = this.value"
                           style="flex: 1;">
                </div>
                <small>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–≤–∞–Ω–∏—è</small>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    {% if title %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{% else %}–°–æ–∑–¥–∞—Ç—å –∑–≤–∞–Ω–∏–µ{% endif %}
                </button>
                <a href="{{ url_for('admin_titles') }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const colorInput = document.getElementById('color');
    const textInput = colorInput.nextElementSibling;
    
    colorInput.addEventListener('input', function() {
        textInput.value = this.value;
    });
    
    textInput.addEventListener('input', function() {
        if (this.value.match(/^#[0-9A-Fa-f]{6}$/)) {
            colorInput.value = this.value;
        }
    });
});
</script>
{% endblock %}

