{% extends "base.html" %}

{% block title %}{% if award %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã{% else %}–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã{% endif %} - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>{% if award %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã{% else %}–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã{% endif %}</h1>
        <a href="{{ url_for('admin_awards') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
    </div>
    
    <div class="form-container">
        <form method="POST" enctype="multipart/form-data" class="form">
            <div class="form-group">
                <label for="title" class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–≥—Ä–∞–¥—ã *</label>
                <input 
                    type="text" 
                    id="title" 
                    name="title" 
                    class="form-input" 
                    value="{{ award.title if award else '' }}" 
                    required
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–≥—Ä–∞–¥—ã"
                >
            </div>
            
            <div class="form-group">
                <label for="icon" class="form-label">–ò–∫–æ–Ω–∫–∞ –Ω–∞–≥—Ä–∞–¥—ã</label>
                <input 
                    type="text" 
                    id="icon" 
                    name="icon" 
                    class="form-input" 
                    value="{{ award.icon if award else 'üéñÔ∏è' }}" 
                    placeholder="üéñÔ∏è"
                    maxlength="2"
                >
                <small class="form-hint">–≠–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: üéñÔ∏è, üèÖ, ‚≠ê, ü•á)</small>
            </div>
            
            <div class="form-group">
                <label for="sort_order" class="form-label">–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label>
                <input 
                    type="number" 
                    id="sort_order" 
                    name="sort_order" 
                    class="form-input" 
                    value="{{ award.sort_order if award else 100 }}"
                    placeholder="100"
                >
                <small class="form-hint">–ß–µ–º –º–µ–Ω—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –≤—ã—à–µ –Ω–∞–≥—Ä–∞–¥–∞ –≤ —Å–ø–∏—Å–∫–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100</small>
            </div>
            
            <div class="form-group">
                <label for="image" class="form-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã</label>
                {% if award and award.image %}
                <div class="file-upload-group" style="margin-bottom: 1rem;">
                    <div class="current-file-preview">
                        <img src="{{ award.image }}" alt="–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" style="max-width: 200px; max-height: 200px; border-radius: 8px;">
                        <span class="current-file-label">–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</span>
                    </div>
                </div>
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label>
                        <input type="checkbox" name="delete_image" value="1">
                        –£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    </label>
                </div>
                {% endif %}
                <input 
                    type="file" 
                    id="image" 
                    name="image" 
                    accept=".png,.jpg,.jpeg,.svg,.gif,.webp"
                    class="file-input"
                >
                <label for="image" class="file-upload-label">
                    <span class="file-upload-text">{% if award and award.image %}–ó–∞–º–µ–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ{% else %}–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª{% endif %}</span>
                    <span class="file-upload-btn">üìÅ</span>
                </label>
                <small class="form-hint">–§–æ—Ä–º–∞—Ç—ã: .png, .jpg, .jpeg, .svg, .gif, .webp</small>
            </div>
            
            <div class="form-group">
                <label for="users" class="form-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</label>
                <div style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; background-color: var(--bg-secondary);">
                    {% if users %}
                        {% for user in users %}
                        <div style="margin-bottom: 0.5rem;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input 
                                    type="checkbox" 
                                    name="users" 
                                    value="{{ user.user_id }}"
                                    {% if current_user_ids and user.user_id in current_user_ids %}checked{% endif %}
                                    style="margin-right: 0.5rem;"
                                >
                                <span>{{ user.username }} (ID: {{ user.user_id }})</span>
                            </label>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    {% endif %}
                </div>
                <small class="form-hint">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–∞ —ç—Ç–∞ –Ω–∞–≥—Ä–∞–¥–∞</small>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    {% if award %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{% else %}–°–æ–∑–¥–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É{% endif %}
                </button>
                <a href="{{ url_for('admin_awards') }}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}

