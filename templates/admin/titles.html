{% extends "base.html" %}

{% block title %}Звания - Админ-панель{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>Управление званиями</h1>
        <div>
            <a href="{{ url_for('admin_title_create') }}" class="btn btn-primary">Создать звание</a>
            <a href="{{ url_for('admin_panel') }}" class="btn btn-secondary">← Назад</a>
        </div>
    </div>
    
    <div class="table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Иконка</th>
                    <th>Название</th>
                    <th>Отображаемое имя</th>
                    <th>Описание</th>
                    <th>Цвет</th>
                    <th>Тип</th>
                    <th>Пользователей</th>
                    <th>Дата создания</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                {% for title in titles %}
                <tr>
                    <td data-label="Иконка">
                        {% if title.icon %}
                        <span style="font-size: 1.5rem;">{{ title.icon }}</span>
                        {% else %}
                        <span class="text-muted">-</span>
                        {% endif %}
                    </td>
                    <td data-label="Название"><code>{{ title.name }}</code></td>
                    <td data-label="Отображаемое имя">
                        <span class="title-badge" style="background-color: {{ title.color }}20; color: {{ title.color }}; border-color: {{ title.color }};">
                            {% if title.icon %}{{ title.icon }} {% endif %}{{ title.display_name }}
                        </span>
                    </td>
                    <td data-label="Описание">{{ title.description or '-' }}</td>
                    <td data-label="Цвет">
                        <span style="display: inline-block; width: 30px; height: 30px; background-color: {{ title.color }}; border-radius: 4px; border: 1px solid var(--border-color);"></span>
                        <code style="margin-left: 0.5rem;">{{ title.color }}</code>
                    </td>
                    <td data-label="Тип">
                        {% if title.is_system %}
                            <span class="badge badge-system">Системное</span>
                        {% else %}
                            <span class="badge badge-custom">Кастомное</span>
                        {% endif %}
                    </td>
                    <td data-label="Пользователей">{{ title.user_count }}</td>
                    <td data-label="Дата создания">{{ title.created_at or 'N/A' }}</td>
                    <td data-label="Действия">
                        {% if not title.is_system %}
                        <a href="{{ url_for('admin_title_edit', title_id=title.id) }}" class="btn btn-sm btn-primary">Редактировать</a>
                        <form method="POST" action="{{ url_for('admin_title_delete', title_id=title.id) }}" style="display: inline;" onsubmit="return confirm('Вы уверены, что хотите удалить это звание?');">
                            <button type="submit" class="btn btn-sm btn-danger">Удалить</button>
                        </form>
                        {% else %}
                        <span class="text-muted">Системное звание</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

