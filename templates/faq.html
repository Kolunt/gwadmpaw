{% extends "base.html" %}

{% block title %}FAQ - Часто задаваемые вопросы{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="faq-container">
        <h1>Часто задаваемые вопросы (FAQ)</h1>
        
        {% if faq_by_category %}
        {# Динамический контент из БД #}
        {% for category, items in faq_by_category.items() %}
        <div class="faq-section">
            <h2>
                {% if category == 'general' %}Общие вопросы
                {% elif category == 'events' %}Мероприятия
                {% elif category == 'profile' %}Профиль и настройки
                {% elif category == 'technical' %}Технические вопросы
                {% elif category == 'security' %}Безопасность и конфиденциальность
                {% else %}{{ category|title }}
                {% endif %}
            </h2>
            
            {% for item in items %}
            <div class="faq-item">
                <div class="faq-question">
                    <h3>{{ item.question }}</h3>
                </div>
                <div class="faq-answer">
                    {{ item.answer|safe }}
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
        
        {% else %}
        {# Статический контент (для обратной совместимости) #}
        <div class="faq-section">
            <h2>Общие вопросы</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Что такое "Анонимные Деды Морозы"?</h3>
                </div>
                <div class="faq-answer">
                    <p>Это платформа для анонимного обмена подарками между участниками. Вы можете зарегистрироваться на мероприятие, получить случайного получателя подарка и отправить ему подарок, оставаясь инкогнито до праздника.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Как зарегистрироваться?</h3>
                </div>
                <div class="faq-answer">
                    <p>Для регистрации необходимо войти через GWars. Нажмите на иконку GWars в правом верхнем углу или используйте кнопку "Войти через GWars" на главной странице. После авторизации ваш аккаунт будет автоматически создан в системе.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Могу ли я участвовать без авторизации через GWars?</h3>
                </div>
                <div class="faq-answer">
                    <p>Нет, для участия в мероприятиях необходимо авторизоваться через GWars. Это обеспечивает безопасность и проверку личности участников.</p>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Мероприятия</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Как принять участие в мероприятии?</h3>
                </div>
                <div class="faq-answer">
                    <p>Перейдите в раздел "Мероприятия" в меню, выберите интересующее вас мероприятие и нажмите "Зарегистрироваться". Регистрация доступна только в определенные периоды времени, указанные администратором.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Что такое этапы мероприятия?</h3>
                </div>
                <div class="faq-answer">
                    <p>Каждое мероприятие состоит из нескольких этапов:</p>
                    <ul>
                        <li><strong>Предварительная регистрация</strong> - ранний этап для желающих участвовать</li>
                        <li><strong>Основная регистрация</strong> - основной период регистрации</li>
                        <li><strong>Закрытие регистрации</strong> - регистрация завершена</li>
                        <li><strong>Жеребьёвка</strong> - случайное распределение получателей подарков</li>
                        <li><strong>Отправка подарков</strong> - период отправки подарков</li>
                        <li><strong>Дата праздника</strong> - день, когда подарки вручаются</li>
                        <li><strong>Послепраздничное настроение</strong> - период для обмена впечатлениями</li>
                    </ul>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Как узнать, кому я должен отправить подарок?</h3>
                </div>
                <div class="faq-answer">
                    <p>После завершения жеребьёвки вы получите информацию о получателе подарка в личном кабинете. Вы узнаете, кому отправлять подарок, но ваше имя останется неизвестным получателю до праздника.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Можно ли отменить регистрацию на мероприятие?</h3>
                </div>
                <div class="faq-answer">
                    <p>Отмена регистрации возможна только до начала этапа "Закрытие регистрации". После этого этапа отмена регистрации невозможна, так как начинается процесс жеребьёвки.</p>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Профиль и настройки</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Как изменить свой аватар?</h3>
                </div>
                <div class="faq-answer">
                    <p>Перейдите в свой профиль (иконка в правом верхнем углу) и нажмите "Редактировать профиль". В разделе "Аватар" вы сможете выбрать новый аватар из библиотеки DiceBear. Каждый аватар уникален и не может быть повторен.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Что такое звания и как их получить?</h3>
                </div>
                <div class="faq-answer">
                    <p>Звания - это особые метки, которые администраторы могут присвоить пользователям за вклад в проект. Существуют звания: Автор идеи, Разработчик, Амбассадор, Дизайнер. Звания отображаются в вашем профиле.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Можно ли изменить информацию из GWars?</h3>
                </div>
                <div class="faq-answer">
                    <p>Нет, информация из GWars (имя, уровень, синдикат и т.д.) синхронизируется автоматически и не может быть изменена вручную. Вы можете редактировать только дополнительную информацию: биографию, контакты и аватар.</p>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Технические вопросы</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Поддерживается ли мобильная версия?</h3>
                </div>
                <div class="faq-answer">
                    <p>Да, сайт полностью адаптирован для мобильных устройств. Вы можете использовать меню, свайпая его влево-вправо для открытия/закрытия и вверх-вниз для прокрутки. Также доступна темная и светлая темы оформления.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Как переключить тему оформления?</h3>
                </div>
                <div class="faq-answer">
                    <p>Используйте иконку переключения темы в правом верхнем углу сайта. Выбранная тема сохраняется и будет использоваться при следующих посещениях.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Что делать, если возникла ошибка при входе?</h3>
                </div>
                <div class="faq-answer">
                    <p>Если при входе через GWars возникает ошибка, убедитесь, что вы авторизованы на сайте GWars.io. Если проблема сохраняется, обратитесь к администратору через контакты в вашем профиле или напишите в поддержку GWars.</p>
                </div>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Безопасность и конфиденциальность</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Безопасны ли мои данные?</h3>
                </div>
                <div class="faq-answer">
                    <p>Да, мы используем безопасную авторизацию через GWars и не храним пароли пользователей. Вся информация передается через защищенные соединения (HTTPS). Ваши контактные данные видны только вам и администраторам системы.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Кто может видеть мой профиль?</h3>
                </div>
                <div class="faq-answer">
                    <p>Ваш профиль доступен для просмотра всем авторизованным пользователям. Однако контактная информация (email, телефон, мессенджеры) видна только вам и администраторам. Остальные пользователи видят только публичную информацию: имя, уровень, синдикат, роли, звания и биографию.</p>
                </div>
            </div>
        </div>
        
        {% endif %}
        
        <div class="faq-footer">
            <p>Не нашли ответ на свой вопрос? Обратитесь к администраторам через раздел "Участники" или используйте контакты в вашем профиле.</p>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Добавляем функциональность раскрытия/сворачивания вопросов
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        const answer = item.querySelector('.faq-answer');
        
        if (question && answer) {
            // Добавляем иконку для раскрытия
            const icon = document.createElement('span');
            icon.className = 'faq-toggle-icon';
            icon.innerHTML = '▼';
            question.appendChild(icon);
            
            // По умолчанию все открыты
            item.classList.add('expanded');
            
            question.addEventListener('click', function() {
                item.classList.toggle('expanded');
                icon.style.transform = item.classList.contains('expanded') ? 'rotate(0deg)' : 'rotate(-90deg)';
            });
            
            question.style.cursor = 'pointer';
        }
    });
});
</script>
{% endblock %}

